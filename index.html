<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Twitterbot farm by strizhechenko</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Twitterbot farm</h1>
        <p>Twitterbot farm to run multiple twitter-bots at once using one source of tweets and with learning support.</p>

        <p class="view"><a href="https://github.com/strizhechenko/twitterbot_farm">View the Project on GitHub <small>strizhechenko/twitterbot_farm</small></a></p>


        <ul>
          <li><a href="https://github.com/strizhechenko/twitterbot_farm/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/strizhechenko/twitterbot_farm/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/strizhechenko/twitterbot_farm">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a id="twitterbot-farm" class="anchor" href="#twitterbot-farm" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Twitterbot-farm</h1>

<p>"Фреймворк" для того, чтобы крутить множество ботов на одной машинке в одном окружении. Призван облегчить миграцию, при необходимости и снизить число запросов к twitter API.</p>

<h2>
<a id="bot" class="anchor" href="#bot" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Bot</h2>

<p>Заведует авторизацией и общением с Twibot.</p>

<p>Знает всё про редис - берёт оттуда id базы, token, secret итд, отдаёт их Twibot.</p>

<h2>
<a id="reader" class="anchor" href="#reader" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Reader</h2>

<p>Просто складирование твитов в редис. Не занимается ротацией (пока что).</p>

<h2>
<a id="writer" class="anchor" href="#writer" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Writer</h2>

<p>Просто постинг твитов по шаблону.</p>

<p>Единственный источник твитов - id базы Reader'а + id последнего обработанного твита.</p>

<p>Однако должен ходить в базу analyzer'а, чтобы узнать что писать не стоит.</p>

<h2>
<a id="analyzer" class="anchor" href="#analyzer" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Analyzer</h2>

<p>Просто анализатор запощенного Writer. Тут сложнее:</p>

<ul>
<li>необходимо ползать в твиттур чтобы узнать что налайкали что нет (+ диапазон по времени надо придумать)</li>
<li>необходимо что-то там считать, оценки, рейты итд</li>
<li>необходимо писать это что-то в свою базу</li>
</ul>

<h2>
<a id="Концепт-работы" class="anchor" href="#%D0%9A%D0%BE%D0%BD%D1%86%D0%B5%D0%BF%D1%82-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Концепт работы</h2>

<ol>
<li>Reader пишет в свою базу твиты из ленты не переставая. Это источник текста для других ботов.</li>
<li>Writer периодически читает непрочитанные на своей стороне твиты от Reader и генерит на их основе свои, если рейтинг слов/словосочетаний от Analyzer ниже определённого лимита, то пропускает их.</li>
<li>Analyzer через 24 часа лезет в твиттер и анализирует насколько людям нравится сгенерированное writer'ом. Если людям не нравится это - слова/словосочетания понижаются в рейтинге, если нравится - повышаются.</li>
</ol>

<p>Иными словами могут быть связки:</p>

<p>1 Reader - N пар(Writer + Analyzer)</p>

<h2>
<a id="Схема-хранилища" class="anchor" href="#%D0%A1%D1%85%D0%B5%D0%BC%D0%B0-%D1%85%D1%80%D0%B0%D0%BD%D0%B8%D0%BB%D0%B8%D1%89%D0%B0" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Схема хранилища</h2>

<p>Пока что в качестве хранилища твитов выступает Redis. Данные будут хранится в виде:</p>

<h3>
<a id="db-0-auth" class="anchor" href="#db-0-auth" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>db 0. auth.</h3>

<pre><code>__app__ = [consumer_key, consumer_secret]
@botname = [role, db_id, token, secret]
</code></pre>

<h3>
<a id="db-1-reader-example" class="anchor" href="#db-1-reader-example" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>db 1. reader (example)</h3>

<pre><code>__last_readed_tweet_id__ = "2131312312"
31231412312 = "Ненавижу больницы. Тут всегда много бабушек, которые после того как покашляют, начинает вонять на все помещение."
</code></pre>

<h3>
<a id="db-2-writer-example" class="anchor" href="#db-2-writer-example" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>db 2. writer (example)</h3>

<p><strong>last_processed_tweet_id</strong> = "2131312312"</p>

<h3>
<a id="db-3-analyzer-example" class="anchor" href="#db-3-analyzer-example" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>db 3. analyzer (example)</h3>

<pre><code>__last_analyzed_tweet_id__ = "2131312312"
"всё помещение" = "-1"
"всё" = "20"
"помещение" = "3"
</code></pre>

<h1>
<a id="twitterbot-utils" class="anchor" href="#twitterbot-utils" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Twitterbot-utils</h1>

<h2>
<a id="twibot" class="anchor" href="#twibot" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Twibot</h2>

<p>Даёт возможность авторизоваться из env или явно передать параметры.</p>

<p>Всё остальное по старому.</p>

<p>Ничего не должен знать про redis, максимум параметрами - из redis это всё дёргает Bot из фермы.</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/strizhechenko">strizhechenko</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
